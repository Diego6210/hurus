<div class=" content">
  <div class=" row">
    <div class=" col-md-12">
      <div class=" card">
        <div class=" card-header">
          <h4 class=" title">Objetivos</h4>
          <hr>
        </div>
        <div class=" card-body">
          <h5>Lista de objetivos infectados</h5>

          <button class="btn btn-fill btn-info mb-2 mr-2" style="float:left; float: right;"
            (click)="open(nuevoUsuario)"><i class="fa fa-user-circle"></i> Nuevo Objetivo</button>

          <br><br>
          <!-- Search form -->
          <div class="md-form mt-0">
            <input (keyup)="filtrar($event)" class="form-control" type="text" placeholder="Buscar" aria-label="Search">
          </div>

          <div class="mat-elevation-z8 table-responsive">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 table  " matSort #tabla1>

              <ng-container matColumnDef="Img">
                <th mat-header-cell *matHeaderCellDef> IMAGEN </th>
                <td mat-cell *matCellDef="let usuarios"><i *ngIf="usuarios.tipo" class="fa fa-globe"> </i> <img src="{{usuarios.Img}}" height="60" alt="user"
                    class="rounded-circle"></td>
              </ng-container>

              <ng-container matColumnDef="Nombre">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> PERFIL </th>
                <td mat-cell *matCellDef="let usuarios"> {{usuarios.name}} </td>
              </ng-container>

              <ng-container matColumnDef="Tags">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> TARGETS </th>
                <td mat-cell *matCellDef="let usuarios"><span [ngStyle]="{background: usuarios.tagColor}"
                    class="color">{{usuarios.tag}}</span> </td>
              </ng-container>

              <ng-container matColumnDef="Acciones">
                <th mat-header-cell *matHeaderCellDef> ACCIONES </th>
                <td mat-cell *matCellDef="let usuarios">
                  <button [routerLink]="[usuarios.Path]" class=" btn btn-success btn-link btn-sm btn-icon"
                    tooltip="Refresh" type="button" aria-describedby="tooltip-142"><i
                      class=" tim-icons icon-zoom-split"></i></button>
                </td>
              </ng-container>

              <tr style="width: 100%;" mat-header-row *matHeaderRowDef="columnas"></tr>
              <tr style="width: 100%;" mat-row *matRowDef="let row; columns: columnas;"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
          </div>

        </div>
      </div>
    </div>
  </div>
  <ng-template #nuevoUsuario let-modal class=" form-control-modal">
    <div class="modal-header">
      <h4 style="color: #ffffff;" class="modal-title">Crar nuevo tag </h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span style="color: red;" aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">

      <div class="row">
        <div class="col-md-12">
          <div class="clearfix center-block">
            <label class=" justify-content-center text-center"
              style="position :relative !important;left: 40% !important;">Crear</label><br>
              <div class="row">
                <div class="col-md-6">
                  <button class="btn btn-fill btn-info btn-sm"
                  (click)="route('objetivo')"><i class="fa fa-user-circle"></i> Nuevo Objetivo</button>
                </div>
                <div class="col-md-6">
                  <button class="btn btn-fill btn-info btn-sm"
                  (click)="route('web')"><i class="fa fa-globe"></i> Nuevo Objetivo Web</button>
                </div>
              </div>
          </div>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-md-12">
          <div class="center-block">
            <label class=" justify-content-center text-center"
              style="position :relative !important;left: 35% !important;">Tomar uno Existente</label><br>
              
              <div class="row">
                <div class="col-md-12">
                  <div class="ng-autocomplete">
                    <ng-autocomplete style="background-color: rgb(74, 76, 97);"
                      [data]="data"
                      [searchKeyword]="keyword"
                      (selected)='selectEvent($event)'
                      [itemTemplate]="itemTemplate"
                      [notFoundTemplate]="notFoundTemplate">                                 
                    </ng-autocomplete>
                    
                    <ng-template #itemTemplate let-item>
                      <img [src]="'https://upload.wikimedia.org/wikipedia/commons/thumb/'+item.img" height="50" alt="user" class="rounded-circle"> <b [innerHTML]="item.name"></b>
                    </ng-template>
                    
                    <ng-template #notFoundTemplate let-notFound>
                      <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </div>
                </div>
              </div>
          </div>
        </div>
      </div>

    </div>
    <div class="modal-footer">
      <br><br>
      <button type="button" class="btn btn-fill btn-info " (click)="modal.dismiss('Cross click')">Close</button>
    </div>
  </ng-template>

  <style>
    .ng-autocomplete{
      background-color: rgb(74, 76, 97);
      width: 100%;
    }

    .ng-autocomplete:hover{
      background-color: rgb(74, 76, 97);
      width: 100%;
    }

    b {
      padding: 10px;
      color: black;
    }

    .text {

      text-align: center;
    }

    .modaltemplate {
      background-color: #27293D;
      color: white;
    }
  </style>